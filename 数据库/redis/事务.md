# Redis事务

# **事务**

Redis中拥有操作序列，但这个序列并不能保证多连接并发操作时的原子性，所以需要通过WATCH监控内存是否发生改变，并通过MULTI与EXEC进行事务操作，这种做法类似于CAS乐观锁机制。

如果watch监控的多个KEY中任何KEY的值已经被其他客户端更改，则使用EXEC执行事务时，事务队列将不会被执行，同时返回Nullmulti-bulk应答以通知调用者事务执行失败。

**若在事务队列中存在命令性错误（类似于java编译性错误），则执行EXEC命令时，所有命令都不会执行**

**若在事务队列中存在语法性错误（类似于java的1/0的运行时异常），则执行EXEC命令时，其他正确命令会被执行，错误命令抛出异常**
# 集群和主从复制

集群是分布式数据库方案，提供以下特性：
- 分片进行数据共享，需要提供负载均衡系统（LBS，Load Balance System）、负载均衡集群（LBC，Load Balance Cluster）
- 功能冗余
- 提供复制
- 故障转移

> 最佳实践：从架构和集群上层角度看，**主备组成的单点**可以认为是同一实例同一个库，具备读写能力；**集群则结合分库分表**，将压力分散到不同的单点上，所以不同单点数据不同（也可以做某些关键数据的冗余处理）

## **1. 节点**

> [集群和主从复制有什么关系和区别？](https://www.zhihu.com/question/34366991)：对于数据库来说，按实例区分，1主1从（主读写从只读），或1主2从（主读写，一备只读，二备延时冷备），组成的整体一般视为一个节点

1主2从作为完整单点的原因：

> 严格来说，1主2从的方式才算合理的完整节点，发送故障的时候主从可以切换，还有一个冷备做延时同步，保证大部分数据冗余不会完全丢失，这样保障单点的系统数据可靠性，并通过读写分离提升IO写的性能

在Redis中的集群节点介绍中，每个节点的clusterNode.flags都为REDIS_NODE_MASTER，书本的做法是将主服务器加入集群管理，并通过

# 参考
- [Redis设计与实现第十五章：复制]()
- [Redis设计与实现第十六章：sentinel]()
- [Redis设计与实现第十七章：集群]()
- [sharding-jdbc]()
- [集群和主从复制有什么关系和区别？](https://www.zhihu.com/question/34366991)
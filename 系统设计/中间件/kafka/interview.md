# Kafka：interview

# **1. 为什么用mq**

1. 实现分布式系统下的调用解耦，**隐藏上下游之间的依赖关系**，统一以消息规范进行交互可以方便地加入新的生产端/消费端

2. 可以解决过长的调用链路，将没必要卡在主链路的业务拆分解耦，通过**异步调用**的方式进行执行

3. **削峰**，对短时间的高并发请求进行缓冲，防止大量读写压力打在db上造成系统崩溃（降低系统对操作量的敏感程度）

# **2. mq缺点**

1. 如何确保消息可靠传输（可靠性与重复性互为矛盾）

    在kafka这种at least once的可靠性保证下，势必涉及到消息重试，需保证各个端幂等

2. 传递路径变长，延时增加

3. **上游无法知道下游的执行结果**，需要补充结果获取的机制

    - 下游提供结果查询接口

    - 下游主动通知上游

# **3. 什么时候使用mq**

> `调用方实时依赖执行结果的业务场景，请使用调用，而不是mq`



# **4. Kafka介绍理解**

Kafka本身是一个流式数据处理平台，更多偏向于拿它当做消息队列系统使用



# 参考
- [深度解读：Kafka 放弃 ZooKeeper，消息系统兴起二次革命](http://k.sina.com.cn/article_1746173800_68147f6802701014i.html)

# 重点参考
- [kafka11问](https://www.jianshu.com/p/e1af3a703550)
- [Kafka的特性，以及为什么有这些特性](https://www.jianshu.com/p/449f009bce1d)
# HPC&HA&LBC（未完成）

- HA：系统高可用
- HPC：系统高性能
- LBC：负载均衡

# **1. HA**

系统高可用的范畴：主从模式、redis的sentinel机制

redis sentinel：中心化思想，架构仍为主从结构。提供以上的传统主从复制过程的故障转移机制，但依旧还是没有突破单实例的瓶颈，是高可用（HA）的教科书范例

# **2. HPC**

系统高性能的范畴：cluster、集群

集群是分布式数据库方案，提供以下特性：
- 分片进行数据共享，需要提供负载均衡系统（LBS，Load Balance System）、负载均衡集群（LBC，Load Balance Cluster）
- 功能冗余
- 提供复制
- 故障转移

> 最佳实践：从架构和集群上层角度看，**主备组成的单点**可以认为是同一实例同一个库，具备读写能力；**集群则结合分库分表**，将压力分散到不同的单点上，所以不同单点数据不同（也可以做某些关键数据的冗余处理）

## **节点**

> [集群和主从复制有什么关系和区别？](https://www.zhihu.com/question/34366991)：对于数据库来说，按实例区分，1主1从（主读写从只读），或1主2从（主读写，一备只读，二备延时冷备），组成的整体一般视为一个节点

1主2从作为完整单点的原因：

> 严格来说，1主2从的方式才算合理的完整节点，发送故障的时候主从可以切换，还有一个冷备做延时同步，保证大部分数据冗余不会完全丢失，这样保障单点的系统数据可靠性，并通过读写分离提升IO写的性能

redis cluster：去中心化思想，解决redis单机容量有限的问题，提供分片规则将数据进行分配，专注于高性能（HPC）

# **3. 结合性质**

按照项目体量进行选择：

- 普通项目：普通主从

- 需要提供高可用性：sentinel

- 需要提供高性能，并兼顾一定的高可用性：cluster

<!--
后续规划：
1. LBC概念认知，基本应用，常见的LB，负载原理

2. HA在数据库、应用服务上的不同体现

3. HPC在数据库、应用服务上的不同体现
 -->

# 参考
- [Redis设计与实现第十五章：复制]()
- [Redis设计与实现第十六章：sentinel]()
- [Redis设计与实现第十七章：集群]()
- [sharding-jdbc]()
- [集群和主从复制有什么关系和区别？](https://www.zhihu.com/question/34366991)
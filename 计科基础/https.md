# https

> http和https的区别

1. http是超文本转移协议，信息是**明文传输**，存在安全风险问题；https在**tcp和http之间**加入了`SSL/TLS`安全协议，使得报文能够**加密传输**，解决了http不安全的缺陷

2. https在三次握手之后，还需要仅需SSL/TLS的握手过程，才可进入加密报文传输

3. http的端口号是**80**，https的端口号是**443**

4. https协议需要向CA（证书权威机构）申请数字证书，保证服务器身份

> https解决了http的哪些问题，如何解决的？

解决了窃取、篡改和冒充节点的问题，通过`混合加密`、`数字签名`和`数字证书`方式进行解决，其中内容采用接收方公钥加密，签名采用发送方私钥加密，可以保证数据既不能被篡改，也不能被窃取

以下的场景都假定 B（发送方） --> A（接收方），C为恶意方

- 窃取：`混合加密`防止明文传输信息被窃取

    混合加密结合了**对称加密**和**非对称加密**各自的优点：

    - 对称加密：只使用一个秘钥，**运算速度快**，但秘钥必须保密，**且无法做到安全的秘钥交换**

    - 非对称加密：使用“公钥”和“私钥”，公钥可以任意分发但私钥保密，解决了**秘钥配送问题**，但**速度效率仅为对称加密的百分之一**

    过程如下：

    1. 在建立通信前，采用**非对称加密**的方式交换**会话秘钥**（解决对称加密算法的秘钥配送问题）

    2. 通信过程中，全部使用**对称加密**的**会话秘钥**方式来加密明文数据（避免非对称加密算法效率低的问题）

- 篡改：`数字签名`对信件内容校验，通信内容若被篡改后将不能正常显示

    过程：

    1. 先用hash函数，生成信件的唯一摘要，这个函数也被称为**摘要算法**

    2. B使用自己的**私钥**对摘要进行加密，生成`数字签名`

    3. 将数字签名附在要发送的信件后面，一同发送给A

    4. A收到B的信件后，通过B的**公钥**解密数字签名获得唯一摘要

    5. 通过B的hash函数对接收到的信件数据同样生成信件唯一摘要，若结果与第四步结果一致，则说明B发送过来的数据并未收到篡改

- 冒充节点：`数字证书`对节点的真实性进行证明

    C可以通过冒充节点的方式，诱导A保存的B公钥置换为C的公钥，之后C就可以通过其私钥冒充B来发送数据，这样数字签名和信件内容混合加密都将形同虚设

    过程：

    将`服务器公钥`放入到数字证书中，借助第三方权威机构CA进行验证，只要证书是可信的，公钥就是可信的

> HTTPS是如何建立连接的？其间交互了什么？

SSL/TLS协议基本流程：



# 参考
- [非对称加解密，私钥和公钥到底是谁来加密，谁来解密](https://blog.csdn.net/qq_23167527/article/details/80614454)

# 重点参考
- [非对称加密原理解析](https://blog.csdn.net/wzzvictory/article/details/9015155):文章2.2有误，详情见评论

- [混合加密流程](https://zhuanlan.zhihu.com/p/157502520)
- [iOS密码学及签名机制](https://www.jianshu.com/p/04205346e0e0)

